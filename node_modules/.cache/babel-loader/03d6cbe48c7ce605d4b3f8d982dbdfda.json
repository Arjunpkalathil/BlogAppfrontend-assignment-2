{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ARJUN\\\\Desktop\\\\BlogAppfrontend-assignment 2\\\\src\\\\components\\\\viewSingleBlog\\\\ViewBlog.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport \"./ViewBlog.css\";\nimport { AiFillDelete, AiFillEdit, AiOutlineCamera } from \"react-icons/ai\";\nimport { useParams } from \"react-router-dom\";\nimport axios from \"axios\";\nimport Loading from \"../loading/Loading\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction ViewBlog() {\n  _s();\n\n  const {\n    postId\n  } = useParams();\n  const [singleData, setSingleData] = useState(null);\n  const [updateMode, setUpdateMode] = useState(false);\n  const [singlePostImage, setSinglePostImage] = useState({\n    blogImg: \"\"\n  });\n  const [formValues, setFormValues] = useState({\n    title: \"\",\n    desc: \"\"\n  });\n  const [ImgLink, setImgLink] = useState(\"\");\n  const [loading, setloading] = useState(false);\n\n  const handleImgUpload = async e => {\n    setSinglePostImage({\n      blogImg: URL.createObjectURL(e.target.files[0])\n    });\n\n    try {\n      const data = new FormData();\n      data.append(\"image\", e.target.files[0]);\n      const uploadImg = await axios({\n        method: \"post\",\n        url: \"https://myblog-1997.herokuapp.com/api/blog/upload\",\n        data\n      });\n      setImgLink(uploadImg);\n    } catch (error) {}\n  };\n\n  useEffect(() => {\n    setloading(true);\n\n    const FetchData = async () => {\n      try {\n        const res = await axios({\n          method: \"get\",\n          url: `https://myblog-1997.herokuapp.com/api/blog/${postId}`,\n          headers: {\n            Authorization: `Bearer ${localStorage.getItem(\"jwt\")}`\n          }\n        });\n        setSingleData(res.data);\n        setFormValues({\n          title: res.data.blog.title,\n          desc: res.data.blog.desc\n        });\n        setSinglePostImage({\n          blogImg: res.data.blog.blogImg\n        });\n        setloading(false);\n      } catch (error) {\n        setloading(false);\n        console.log(error);\n      }\n    };\n\n    FetchData();\n  }, [postId]);\n\n  const handleChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setFormValues({ ...formValues,\n      [name]: value\n    });\n  };\n\n  const handleSubmit = async e => {\n    setloading(true);\n    e.preventDefault();\n\n    try {\n      const res = await axios({\n        method: \"patch\",\n        url: `https://myblog-1997.herokuapp.com/api/blog/${postId}`,\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem(\"jwt\")}`\n        },\n        data: { ...formValues,\n          blogImg: `${ImgLink ? `https://myblog-1997.herokuapp.com/${ImgLink.data.image}` : singlePostImage.blogImg} `\n        }\n      });\n      res && window.location.replace(\"/\");\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  const handleRemovePost = async () => {\n    try {\n      const res = await axios({\n        method: \"DELETE\",\n        url: `https://myblog-1997.herokuapp.com/api/blog/${postId}`,\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem(\"jwt\")}`\n        }\n      });\n      res && window.location.replace(\"/\");\n    } catch (error) {}\n  };\n\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(Loading, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 10\n    }, this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"section\", {\n    className: \"viewBlogContainer\",\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"ImgSection\",\n        children: [updateMode && /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"imgIcon\",\n            htmlFor: \"blogImage\",\n            children: /*#__PURE__*/_jsxDEV(AiOutlineCamera, {\n              style: {\n                backgroundColor: \"white\",\n                borderRadius: \"3px\"\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 98,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            style: {\n              display: \"none\"\n            },\n            onChange: handleImgUpload,\n            type: \"file\",\n            name: \"\",\n            id: \"blogImage\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 102,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true), /*#__PURE__*/_jsxDEV(\"img\", {\n          className: \"viewBlogImg\",\n          src: singlePostImage && singlePostImage.blogImg,\n          alt: singleData && singleData.blog.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"viewBlogBody\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"viewBlogHeader\",\n          children: updateMode ? /*#__PURE__*/_jsxDEV(\"input\", {\n            autoFocus: true,\n            value: formValues && formValues.title,\n            onChange: handleChange,\n            className: \"updateModeTitle\",\n            type: \"text\",\n            name: \"title\",\n            id: \"\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 120,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n              className: \"viewBlogHeading\",\n              children: singleData && singleData.blog.title\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 131,\n              columnNumber: 17\n            }, this), singleData && singleData.role === \"admin\" && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"viewBlogBtn\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                children: /*#__PURE__*/_jsxDEV(AiFillEdit, {\n                  onClick: () => setUpdateMode(true),\n                  className: \"edit\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 137,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 136,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                children: /*#__PURE__*/_jsxDEV(AiFillDelete, {\n                  onClick: handleRemovePost,\n                  className: \"delete\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 143,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 142,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 135,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"viewBlogAuthor\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              style: {\n                color: \"lightgreen\"\n              },\n              children: \"Author:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 156,\n              columnNumber: 15\n            }, this), singleData && singleData.blog.user]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 155,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            style: {\n              fontSize: \"12px\"\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              style: {\n                fontSize: \"16px\"\n              },\n              children: \"posted:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 160,\n              columnNumber: 15\n            }, this), \" \", new Date(singleData && singleData.blog.updatedAt).toDateString()]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 159,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"viewBlogDesc\",\n          children: updateMode ? /*#__PURE__*/_jsxDEV(\"textarea\", {\n            className: \"updateModeTextarea\",\n            name: \"desc\",\n            value: formValues && formValues.desc,\n            onChange: handleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 166,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"Blogdesc\",\n            children: singleData && singleData.blog.desc\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 173,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 11\n        }, this), updateMode && /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          className: \"updateModeBtn\",\n          children: \"publish\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 177,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 92,\n    columnNumber: 5\n  }, this);\n}\n\n_s(ViewBlog, \"y3jpxDQMzQFC2hIptzXAhL+gjMc=\", false, function () {\n  return [useParams];\n});\n\n_c = ViewBlog;\nexport default ViewBlog;\n\nvar _c;\n\n$RefreshReg$(_c, \"ViewBlog\");","map":{"version":3,"sources":["C:/Users/ARJUN/Desktop/BlogAppfrontend-assignment 2/src/components/viewSingleBlog/ViewBlog.js"],"names":["React","useEffect","useState","AiFillDelete","AiFillEdit","AiOutlineCamera","useParams","axios","Loading","ViewBlog","postId","singleData","setSingleData","updateMode","setUpdateMode","singlePostImage","setSinglePostImage","blogImg","formValues","setFormValues","title","desc","ImgLink","setImgLink","loading","setloading","handleImgUpload","e","URL","createObjectURL","target","files","data","FormData","append","uploadImg","method","url","error","FetchData","res","headers","Authorization","localStorage","getItem","blog","console","log","handleChange","name","value","handleSubmit","preventDefault","image","window","location","replace","handleRemovePost","backgroundColor","borderRadius","display","role","color","user","fontSize","Date","updatedAt","toDateString"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport \"./ViewBlog.css\";\nimport { AiFillDelete, AiFillEdit, AiOutlineCamera } from \"react-icons/ai\";\nimport { useParams } from \"react-router-dom\";\nimport axios from \"axios\";\nimport Loading from \"../loading/Loading\";\nfunction ViewBlog() {\n  const { postId } = useParams();\n  const [singleData, setSingleData] = useState(null);\n  const [updateMode, setUpdateMode] = useState(false);\n  const [singlePostImage, setSinglePostImage] = useState({ blogImg: \"\" });\n  const [formValues, setFormValues] = useState({ title: \"\", desc: \"\" });\n  const [ImgLink, setImgLink] = useState(\"\");\n  const [loading,setloading]=useState(false)\n\n  const handleImgUpload = async (e) => {\n    setSinglePostImage({ blogImg: URL.createObjectURL(e.target.files[0]) });\n    try {\n      const data = new FormData();\n      data.append(\"image\", e.target.files[0]);\n      const uploadImg = await axios({\n        method: \"post\",\n        url: \"https://myblog-1997.herokuapp.com/api/blog/upload\",\n        data,\n      });\n      setImgLink(uploadImg);\n    } catch (error) {}\n  };\n\n  useEffect(() => {\n    setloading(true)\n    const FetchData = async () => {\n      try {\n        const res = await axios({\n          method: \"get\",\n          url: `https://myblog-1997.herokuapp.com/api/blog/${postId}`,\n          headers: { Authorization: `Bearer ${localStorage.getItem(\"jwt\")}` },\n        });\n        setSingleData(res.data);\n        setFormValues({ title: res.data.blog.title, desc: res.data.blog.desc });\n        setSinglePostImage({ blogImg: res.data.blog.blogImg });\n     setloading(false)\n      } catch (error) {\n     setloading(false)\n\n        console.log(error);\n      }\n    };\n    FetchData();\n  }, [postId]);\n\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n    setFormValues({ ...formValues, [name]: value });\n  };\n  const handleSubmit = async (e) => {\n    setloading(true)\n    e.preventDefault();\n    try {\n      const res = await axios({\n        method: \"patch\",\n        url: `https://myblog-1997.herokuapp.com/api/blog/${postId}`,\n        headers: { Authorization: `Bearer ${localStorage.getItem(\"jwt\")}` },\n        data: {\n          ...formValues,\n          blogImg: `${\n            ImgLink\n              ? `https://myblog-1997.herokuapp.com/${ImgLink.data.image}`\n              : singlePostImage.blogImg\n          } `,\n        },\n      });\n      res && window.location.replace(\"/\");\n    } catch (error) {\n      console.log(error);\n    }\n  };\n  const handleRemovePost = async () => {\n    try {\n    const res=  await axios({\n        method: \"DELETE\",\n        url: `https://myblog-1997.herokuapp.com/api/blog/${postId}`,\n        headers: { Authorization: `Bearer ${localStorage.getItem(\"jwt\")}` },\n      });\n      res && window.location.replace(\"/\");\n    } catch (error) {}\n  };\nif(loading){\n  return <Loading/>\n}\n  return (\n    <section className=\"viewBlogContainer\">\n      <form onSubmit={handleSubmit}>\n        <div className=\"ImgSection\">\n          {updateMode && (\n            <>\n              <label className=\"imgIcon\" htmlFor=\"blogImage\">\n                <AiOutlineCamera\n                  style={{ backgroundColor: \"white\", borderRadius: \"3px\" }}\n                />\n              </label>\n              <input\n                style={{ display: \"none\" }}\n                onChange={handleImgUpload}\n                type=\"file\"\n                name=\"\"\n                id=\"blogImage\"\n              />\n            </>\n          )}\n          <img\n            className=\"viewBlogImg\"\n            src={singlePostImage && singlePostImage.blogImg}\n            alt={singleData && singleData.blog.title}\n          />\n        </div>\n        <div className=\"viewBlogBody\">\n          <div className=\"viewBlogHeader\">\n            {updateMode ? (\n              <input\n                autoFocus={true}\n                value={formValues && formValues.title}\n                onChange={handleChange}\n                className=\"updateModeTitle\"\n                type=\"text\"\n                name=\"title\"\n                id=\"\"\n              />\n            ) : (\n              <>\n                <h1 className=\"viewBlogHeading\">\n                  {singleData && singleData.blog.title}\n                </h1>\n                {singleData && singleData.role === \"admin\" && (\n                  <div className=\"viewBlogBtn\">\n                    <button>\n                      <AiFillEdit\n                        onClick={() => setUpdateMode(true)}\n                        className=\"edit\"\n                      />\n                    </button>\n                    <button>\n                      <AiFillDelete\n                        onClick={handleRemovePost}\n                        className=\"delete\"\n                      />\n                    </button>\n                  </div>\n                )}\n              </>\n            )}\n          </div>\n\n          <div className=\"viewBlogAuthor\">\n            <h3>\n              <span style={{ color: \"lightgreen\" }}>Author:</span>\n              {singleData && singleData.blog.user}\n            </h3>\n            <p style={{ fontSize: \"12px\" }}>\n              <span style={{ fontSize: \"16px\" }}>posted:</span>{\" \"}\n              {new Date(singleData && singleData.blog.updatedAt).toDateString()}\n            </p>\n          </div>\n          <div className=\"viewBlogDesc\">\n            {updateMode ? (\n              <textarea\n                className=\"updateModeTextarea\"\n                name=\"desc\"\n                value={formValues && formValues.desc}\n                onChange={handleChange}\n              ></textarea>\n            ) : (\n              <p className=\"Blogdesc\">{singleData && singleData.blog.desc}</p>\n            )}\n          </div>\n          {updateMode && (\n            <button type=\"submit\" className=\"updateModeBtn\">\n              publish\n            </button>\n          )}\n        </div>\n      </form>\n    </section>\n  );\n}\n\nexport default ViewBlog;\n"]},"metadata":{},"sourceType":"module"}